var isIE6=navigator.userAgent.toLowerCase().indexOf("msie 6")!=-1;
jQuery.fn.megamenu=function(a){var a=jQuery.extend({activate_action:"mouseover",deactivate_action:"mouseleave",show_method:"slideDown",hide_method:"slideUp",justify:"left",enable_js_shadow:!0,shadow_size:3,mm_timeout:250},a),f=this;if(a.activate_action=="click")a.mm_timeout=0;f.children("li").each(function(){jQuery(this).addClass("mm-item");jQuery(".mm-item").css({"float":a.justify});jQuery(this).find("div:first").addClass("mm-item-content");jQuery(this).find("a:first").addClass("mm-item-link");var g=
jQuery(this).find(".mm-item-content"),d=jQuery(this).find(".mm-item-link");g.hide();jQuery(document).bind("click",function(){jQuery(".mm-item-content").hide();jQuery(".mm-item-link").removeClass("mm-item-link-hover")});jQuery(this).bind("click",function(a){a.stopPropagation()});g.wrapInner('<div class="mm-content-base"></div>');a.enable_js_shadow==!0&&g.append('<div class="mm-js-shadow"></div>');var h=0;jQuery(this).bind(a.activate_action,function(b){b.stopPropagation();var i=jQuery(this).find("a.mm-item-link"),
c=jQuery(this).find("div.mm-item-content");clearTimeout(h);h=setTimeout(function(){i.addClass("mm-item-link-hover");c.css({top:d.offset().top+d.outerHeight()-1+"px",left:d.offset().left-5+"px"});if(a.justify=="left"){var b=f.offset().left+f.outerWidth(),e=d.offset().left+g.outerWidth()-5;e>=b&&c.css({left:d.offset().left-(e-b)-2+"px"})}else if(a.justify=="right")b=f.offset().left,e=d.offset().left-c.outerWidth()+d.outerWidth()+5,e<=b?c.css({left:b+2+"px"}):c.css({left:e+"px"});a.enable_js_shadow==
!0&&(c.find(".mm-js-shadow").height(c.height()),c.find(".mm-js-shadow").width(c.width()),c.find(".mm-js-shadow").css({top:a.shadow_size+(isIE6?2:0)+"px",left:a.shadow_size+(isIE6?2:0)+"px",opacity:0.5}));switch(a.show_method){case "simple":c.show();break;case "slideDown":c.height("auto");c.slideDown("fast");break;case "fadeIn":c.fadeTo("fast",1);break;default:c.each(a.show_method)}},a.mm_timeout)});jQuery(this).bind(a.deactivate_action,function(b){b.stopPropagation();clearTimeout(h);var d=jQuery(this).find("a.mm-item-link"),
b=jQuery(this).find("div.mm-item-content");switch(a.hide_method){case "simple":b.hide();d.removeClass("mm-item-link-hover");break;case "slideUp":b.slideUp("fast",function(){d.removeClass("mm-item-link-hover")});break;case "fadeOut":b.fadeOut("fast",function(){d.removeClass("mm-item-link-hover")});break;default:b.each(a.hide_method),d.removeClass("mm-item-link-hover")}b.length<1&&d.removeClass("mm-item-link-hover")})});this.find(">li:last").after('<li class="clear-fix"></li>');this.show()};